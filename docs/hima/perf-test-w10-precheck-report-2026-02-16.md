# W10 パフォーマンステスト 実行前チェックリスト消化レポート

実施日: 2026-02-16
実施者: ラジ・パテル（Founding Engineer）
目的: W10 本番実行（03-03〜03-09）に向けた事前チェック項目の先行消化

## 1. mock モード回帰テスト結果

Session16（02-15）で Bug-1〜3 を修正したスクリプトの回帰テストを実施。

### 1.1 P-14 --mock 回帰テスト

| 項目 | 結果 |
|------|------|
| シナリオ | P-14 UI応答性テスト |
| プロバイダ | openai (gpt-4o-mini / mock) |
| 行数 | 100件 |
| 総実行時間 | 30,730ms |
| 最終状態 | done=100, error=0 |
| LongTask | 0件 |
| scroll操作 | 56回実行, 平均 10ms（最大 44ms） |
| expand操作 | 56回実行, 平均 28ms（最大 52ms） |
| cancel操作 | 未発動（全件完了が先） |
| エラー | 0件 |
| メモリ | 開始・終了時 10MB 安定 |
| **判定** | **PASS** |

### 1.2 P-15 --mock --sizes=100,200 回帰テスト

| 件数 | 実行時間 | 平均/件 | 完了 | エラー | 最大メモリ | 最終メモリ |
|------|----------|---------|------|--------|-----------|-----------|
| 100 | 6,382ms | 64ms | 100 | 0 | 10MB | 10MB |
| 200 | 12,244ms | 61ms | 200 | 0 | 10MB | 10MB |

- LongTask: 0件
- クラッシュ・タブリロード: なし
- **判定: PASS**

### 1.3 Bug-1〜3 修正維持確認

| Bug | 修正内容 | 確認方法 | 状態 |
|-----|---------|---------|------|
| Bug-1 | `.first` → `.first()` (L288, L531) | ソースコード目視 + P-14 動作確認 | 維持 |
| Bug-2 | `querySelectorAll('div')` → `querySelectorAll('span')` (L302) | ソースコード目視 + P-14/P-15 件数検出正常 | 維持 |
| Bug-3 | `readRowsExpected` 冗長呼び出し削除 | ソースコード目視（定義のみ残存, 呼び出しなし） | 維持 |

## 2. 実行前チェックリスト消化

### 2.1 先行消化可能な項目

| # | チェック項目 | 結果 | 備考 |
|---|------------|------|------|
| 1 | `hima.agiinc.io` にアクセスし正常表示を確認 | **OK** | HTTP 200, 78ms |
| 2 | `api-hima.agiinc.io` への HTTPS 接続確認 | **OK** | HTTP 403（認証なしリクエスト = 正常動作） |
| 3 | Playwright Chromium インストール確認 | **OK** | v1.58.2, Chromium v1208 |
| 4 | `node --check` 構文エラー確認 | **OK** | エラーなし |
| 5 | JSON + MD レポート出力確認 | **OK** | P-14/P-15 それぞれ .json + .md 正常生成 |

### 2.2 W10 初日（03-03）に実施が必要な項目

| # | チェック項目 | ステータス | 対応 |
|---|------------|----------|------|
| 1 | 3プロバイダ API キー有効性確認 | 未実施 | W10 初日に各社コンソールで確認 |
| 2 | API キー課金状態・レートリミット確認 | 未実施 | 特に OpenAI の TPM/RPM 確認が必要 |
| 3 | テスト中に他ユーザー不使用確認 | 未実施 | テスト実行直前に確認 |

## 3. レポート出力ファイル一覧

今回の回帰テストで生成されたファイル:

```
products/hima/scripts/perf/results/
├── hima-perf-p14-1771180167043.json
├── hima-perf-p14-1771180167043.md
├── hima-perf-p15-1771180196157.json
└── hima-perf-p15-1771180196157.md
```

## 4. 総合所見

- スクリプトは Bug-1〜3 修正後の安定状態を維持。P-14/P-15 ともに前回ドライラン（02-15）と同等の結果
- hima.agiinc.io / api-hima.agiinc.io の疎通に問題なし
- 最大のブロッカーは引き続き **API キーの環境変数設定**。W10 初日（03-03）に対応予定
- W10 本番実行の準備はスクリプト・インフラ面で完了
