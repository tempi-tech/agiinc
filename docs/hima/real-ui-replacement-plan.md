# hima デモ GIF 1-A/1-B 実UI差し替え計画（W09）

## 0. 目的

- 1-A LP 用デモGIF (`demo-lp`) と 1-B X 用デモGIF (`demo-x`) で、現在のモックUIを実際の `hima.agiinc.io` 操作映像に差し替える。
- 画面撮影、差し替え箇所、品質ゲート、W09 内実行計画、A1-A8 納品順を同一ドキュメントで確定する。

---

## 1. スクリーンショット（画面キャプチャ）取得手順（実施対象）

### 1-1. 取得対象画面一覧（実画面）

`hima.agiinc.io` で以下を撮る。

- LP（`https://hima.agiinc.io`）
  - `Section 1 Hero`, CTA 付近の静止フレーム
  - `Demo` スペースに入る直前の状態（プレースホルダ未表示）
- APIキー設定画面（`https://hima.agiinc.io/app`）
  - ヘッダ右上「設定」ボタン
  - 3 プロバイダ行（`OPENAI` / `ANTHROPIC` / `GOOGLE`）の入力/未入力UI
- レシピエディタ画面（`/app`）
  - 左パネル: レシピ名、モデル、プロンプト入力、検出変数
  - `{{商品名}}` `{{カテゴリ}}` が変数として確定する瞬間
- CSV 入力・マッピング画面（`/app`）
  - CSV ドラッグ＆ドロップ
  - 読み込み完了後の 10 件表示
  - マッピング `{{商品名}} -> 商品名`, `{{カテゴリ}} -> カテゴリ}` の成立
- バッチ実行画面（`/app`）
  - 「バッチ実行」押下後、進捗バーと完了件数の増加
- 結果テーブル / CSV エクスポート画面（`/app`）
  - 10 件の結果が表示される状態
  - 1行、3行目の行展開
  - 「CSV エクスポート」完了表示

### 1-2. シーン別撮影の再現手順（1-A）

- 基本状態: `https://hima.agiinc.io/app` を開き、レシピ未入力・未実行状態から開始。
- シーン番号は 1-A の最終尺 18 秒に合わせて 4 シーンで構成。
- 画面は 1440×900 のまま連続録画し、後で 1200×750 と 15fps に変換する。

### 1-2a. 1-A シーン1（レシピ入力）

1. レシピ名を `商品説明文生成（デモ用）` に入力
1. モデル選択を画面上で確認し、表示を固定
1. プロンプトを `{{商品名}}` と `{{カテゴリ}}` を含む形式で入力
1. 入力中に変数検出が `{{商品名}}` `{{カテゴリ}}` に切り替わる瞬間を含める
1. 画面内に不要なツールチップが出ない状態で完了

### 1-2b. 1-A シーン2（CSV 読込）

1. CSV ドロップエリアに `docs/hima/demo-data.csv` をドラッグ
1. 処理完了まで待機し、読み込み件数 `10` を確認
1. テーブル上部に `商品名` / `カテゴリ` の自動マッピングが出ることを確認
1. 変換対象列が `商品名,カテゴリ,価格,特徴` であることを視認

### 1-2c. 1-A シーン3（バッチ実行）

1. 「バッチ実行」を押下
1. 進捗バーが開始し、件数表示が `1/10` → `10/10` に増加する区間を収録
1. 失敗表示や再試行トーストが出ない時間を中心に採用
1. 完了直前まで連続で撮る

### 1-2d. 1-A シーン4（結果）

1. 結果テーブルに 10 件表示があることを確認
1. 行 1 と 3 の展開を行い、本文が読める状態を確保
1. 1~2 秒保持してから「CSV エクスポート」を実行
1. エクスポート完了表示（成功トースト）を数秒保持

### 1-3. シーン別撮影の再現手順（1-B）

- 1-B は 1-A の流れを 28 秒構成に拡張し、全体像シーンを先頭に追加。
- 最終 1-B 構成は `シーン1〜5 + エンドフレーム`。
- シーン番号は以下を採用する。
  - シーン1: ワークスペース全景
  - シーン2: レシピ入力
  - シーン3: CSV 読込
  - シーン4: バッチ実行
  - シーン5: 結果表示／エクスポート
  - エンドフレーム: 既存 Remotion 仕様の静止表示

### 1-3a. 1-B シーン1（ワークスペース全景）

1. `/app` 起動時の全体ビューを撮影
1. 画面内に不要な外枠（ブラウザ UI）を含めず、ワークスペース中心で撮る
1. 2 秒程度を確保し、次シーン移行に使える静止状態を採る

### 1-3b. 1-B シーン2（レシピ入力）

1. 1-A と同じ手順でレシピ名、モデル表示、プロンプト入力を再現
1. `{{商品名}}` `{{カテゴリ}}` の検出が見える状態を収録
1. 速度感を 1-B 向けにややゆったりに調整

### 1-3c. 1-B シーン3（CSV 読込）

1. `docs/hima/demo-data.csv` を再度ドロップ
1. 読み込み済み件数を `10` で固定
1. マッピング成立表示を確認して固定
1. 読み込みインジケータが消えた直後を採る

### 1-3d. 1-B シーン4（バッチ実行）

1. バッチ開始後、10 件進行のアニメーションを収録
1. 進捗バー、完了率、失敗件数（出ない想定）を同時に確認
1. 切れ目が出ないよう、開始～中盤～完了付近を連続で撮る

### 1-3e. 1-B シーン5（結果表示）

1. 結果テーブルへ切り替わった状態を収録
1. 1 行目・3 行目の展開を見せる
1. 「CSV エクスポート」押下後、完了表示を収める

### 1-3f. エンドフレーム

1. `hima.agiinc.io`、`無料・登録不要・BYOK` が読める2秒以上の静止フレームを作成
1. Remotion 側で既存の EndFrame 仕様に合わせる

### 1-4. デモデータ投入手順（`docs/hima/demo-data.csv`）

- `docs/hima/demo-data.csv` を PC 上で簡単にドラッグしやすい場所（デスクトップ等）に配置
- ヘッダーは `商品名,カテゴリ,価格,特徴` の順
- シーン2/3 では `10` 件ロードを必ず作る
- シーン5 では 10 件の結果表示に対して行展開を行う

### 1-5. APIキーなしでの撮影可否

- APIキーなしで撮影可能: シーン1（ワークスペース全体）/シーン2（レシピ）/シーン3（CSV）/シーン5の結果表示待機直前
- APIキーなしで撮影不可: シーン4（バッチ実行進行）
- 代替手段:
  - 事前に APIキー付き環境で 1 回バッチ完了まで実行し、完了結果表示を保存してシーン4を外部で代替
  - シーン4は注記付き素材（注: APIキー未設定での再現不可）で別途差し替える方針を明記
  - ネットワーク不安定時は 1-B のシーン1〜3 とシーン5 を先に収録し、ネットワーク回復後にシーン4のみ再取得

---

## 2. ブラウザ設定（撮影環境）

### 2-1. Chrome 起動設定

- 推奨コマンド
```bash
/Applications/Google\\ Chrome.app/Contents/MacOS/Google\\ Chrome --app=https://hima.agiinc.io --window-size=1440,900
```
- 固定サイズ: 内部 1440×900（収録用基準）
- DevTools、ブックマークバー、拡張機能の表示を消して撮影

### 2-2. Chrome DevTools での解像度設定

1. `Cmd+Option+I` で DevTools を開く
1. `Cmd+Shift+M` でデバイスツールバーを開く
1. Responsive を選択し、幅 `1440`、高さ `900` を入力
1. 撮影直前に DevTools は閉じ、領域に収まることを確認
1. 必要なら同サイズを `Window capture` の指定画面サイズへ反映

### 2-3. ダークテーマ前提チェック

1. App 起動後、背景を目視で `#0F172A` 近似として確認
1. コンソールで確認
```js
getComputedStyle(document.documentElement).backgroundColor
```
期待値は `rgb(15, 23, 42)` か `rgb(15, 23, 42)` 相当
1. 文字（白）と背景のコントラストを CTA/テーブル文字で確認
1. 画面内にカーソルオーバーレイが有効化されていないことを確認

### 2-4. ネットワーク設定（デモデータでのオフライン可否）

- 取得対象シーン2まで（レシピ・CSV）は、ネットワーク不具合が起きても最小構成で撮影可能
- シーン4（バッチ）は `api-hima.agiinc.io` 到達が必要
- 切り替え手順（撮影中ネットワーク不調時）
  - `S1`〜`S3` と `S5`（結果表示）を先に撮る
  - 回復後に `S4` を追加入手

### 2-5. キャプチャフロー

- 1 回あたり 1〜2 シーン分を 30fps WebM で連続録画し、後段で 15/12fps へ変換
- カーソル常時表示
- 保存ダイアログ、拡張機能通知、エラートーストは除外
- フレーム落ちが出た箇所は再撮影

---

## 3. Remotion 置換マッピング（`products/hima/demo-video/`）

### 3-1. `DemoGif` エントリ

- `products/hima/demo-video/src/DemoGifLP.tsx`
  - `DemoGifLP` の `SceneRecipe`, `SceneCsvImport`, `SceneBatchExec`, `SceneExport` の構成を維持。
  - 置換対象: 4 シーン内部の `HimaWorkspace` 生成ロジックを実UI映像参照へ切替。
- `products/hima/demo-video/src/DemoGifX.tsx`
  - `SceneOverviewX` 追加を含む 5シーン構成を維持。
  - 置換対象: `SceneOverviewX`, `SceneRecipeX`, `SceneCsvImportX`, `SceneBatchExecX`, `SceneExportX`。

### 3-2. シーン別差し替え（実装観点）

- `products/hima/demo-video/src/scenes/SceneRecipe.tsx`
  - **差替え:** モック文字入力処理を実UIの S1 ショットへ。
  - 置換対象: `promptText`, `variablesDetected`, `cursorPosition`, `showCursorHighlight` を描画する `HimaWorkspace` ブロック全体。
- `products/hima/demo-video/src/scenes/SceneRecipeX.tsx`
  - **差替え:** レシピ名＋プロンプト＋モデル選択までの 6 秒域を実UIに置換。
  - 置換対象: `cursor*` 演出と `HimaWorkspace` の可変レンダリング。
- `products/hima/demo-video/src/scenes/SceneCsvImport.tsx`
- `products/hima/demo-video/src/scenes/SceneCsvImportX.tsx`
  - **差替え:** ドラッグ＆ドロップ、マッピング成立、件数表示の 1-S2 シーンを実UIで再現。
  - 置換対象: `csvLoaded` / `mappings` / `cursor*` / `csvPreviewData` のモック描画部。
- `products/hima/demo-video/src/scenes/SceneBatchExec.tsx`
- `products/hima/demo-video/src/scenes/SceneBatchExecX.tsx`
  - **差替え:** 進捗更新・完了件数を実UIで収録した S3 へ。
  - 置替え対象: `batchProgress` 系の合成ロジック。
- `products/hima/demo-video/src/scenes/SceneExport.tsx`
- `products/hima/demo-video/src/scenes/SceneExportX.tsx`
  - **差替え:** 結果テーブル／展開表示／CSVエクスポートの挙動を実UIショットへ。
  - 置換対象: `expandedRow`, `showExportDone`, `results`, `csv mapping` まわりの HimaWorkspace 生成。
- `products/hima/demo-video/src/scenes/SceneEndFrame.tsx`
  - End フレームは現行仕様を維持。色・文言が問題ないため実UI差し替え不要。

### 3-3. 追加実装（差し替え品質担保）

- `products/hima/demo-video/src/` 配下へ `assets/real-ui/` を追加。
- 各シーンは `props` でショット名を受ける方式にして差し替えを一元管理。
- `SceneOverviewX` は 2 秒静止ショットをベースにクロスフェード接続。

---

## 4. 画像品質基準

### 4-1. 1-A LP

- 解像度: `1200 × 750`（16:10）
- FPS: `15`
- ファイル上限: GIF `5MB`, WebM `2MB`
- 素材ソース（raw）: `1440 × 900`
- 色味補正: 基本 **なし**（実UI見た目そのまま）
- 追加条件: 文字潰れ/行送り崩れなし、端数のコントラスト維持

### 4-2. 1-B X

- 解像度: `1200 × 675`（16:9）
- FPS: `12`
- ファイル上限: `15MB`
- 素材ソース（raw）: `1440 × 900`
- 色味補正: 基本 **なし**（必要なら明るさ/コントラストを +/−5% 以内）
- 追加条件: CTA は 2 秒以上読める停滞を確保

### 4-3. 実UI収録素材チェック

- フレームレート・サイズは `ffprobe` で再確認。
- 文字可読性（特に 11px～12px 以降）を X/LP再生想定で確認。
- ループ時の繋ぎが自然（`1-A`: 18s, `1-B`: 28s）。
- 背景色の数値確認:
```bash
ffprobe -v error -select_streams v:0 -show_entries stream=width,height,r_frame_rate <file>
```
背景色の視覚確認は、`#0F172A` が画面主要領域に占有していることを確認。

### 4-4. Remotion 組み込み時のファイル形式・命名規則

- フォーマット:
  - ソース: WebM（音声なし）
  - 完成系: WebM/GIF
  - エンドフレーム: PNG or WebP
- 命名:
  - `real-ui-1a-s01-recipe.webm`
  - `real-ui-1a-s02-csv-import.webm`
  - `real-ui-1a-s03-batch.webm`
  - `real-ui-1a-s04-export.webm`
  - `real-ui-1b-s01-overview.webm`
  - `real-ui-1b-s02-recipe.webm`
  - `real-ui-1b-s03-csv-import.webm`
  - `real-ui-1b-s04-batch.webm`
  - `real-ui-1b-s05-export.webm`
  - `real-ui-1b-endframe.png`

---

## 5. W09（2/24-3/2）実施計画

### 5-1. W09 前半（2/24-2/28）

| 日付 | 作業 | 成果 |
|---|---|---|
| 2/24 | CMO レビュー項目（A1最小フォント=12, S4行展開の質）を差し替え仕様へ反映 | 承認待ちなく制作進行可の仕様版を確定 |
| 2/25 | シーン→ショット（S0〜S4）マッピング確定、素材命名規則のドラフト作成 | `shots/` 命名表と導線図 |
| 2/26 | `demo-capture-guide` と照合し、W09 内での撮影準備を完了（ブラウザ起動手順・マクロ） | 撮影手順の当日障害を減らす |
| 2/27 | CMO 連携で A1（デモGIF）利用方針を確定（見切れ回避・文字サイズ） | 3/12収録時の評価基準を固定 |
| 2/28 | `DemoGif` 側で置換対象コンポーネントの変更点をレビュー（本番編集担当向け） | W10 以降の実装準備完了 |

### 5-2. W09 後半（2/29-3/2）

| 日付 | 作業 | 成果 |
|---|---|---|
| 2/29 | APIキー画面を含む状態確認チェックリストを作成（撮影時のUI可否） | `settings` キャプチャの再現性確保 |
| 3/1 | `demo-data.csv` 10件で CSV 読み込みフローをプレキャプチャ（内部再現用） | 1-B S2/S4 の再現性確認 |
| 3/2 | 収録完了条件を最終承認（画角・ズーム・フォント・色） | 3/12収録時の実施基準凍結 |

---

## 6. A1-A8 制作優先順位と納品スケジュール（ローンチC-02起点）

| 優先度 | 資産 | 主要用途 | 納品日（目標） | 依存 | 備考 |
|---|---|---|---|---|---|
| P0 | **A1** デモGIF 1-B（既存） | D2（3/19）/D5-T5（3/25） | **3/14** | APIキー設定後のUI実収録可否 | `demo-video` の核心価値。最優先 |
| P1 | **A4** 3ステップ図解画像 | D5-T2（3/25） | **3/21** | なし | テキストベース可。UI依存なし |
| P1 | **A5** BYOK訴求画像 | D5-T3（3/25） | **3/21** | なし | テキストベース可。UI依存なし |
| P2 | **A2** カウントダウン画像 | D3（3/21） | **3/10** | なし | テキストベース。最終稿は D3 のみ |
| P2 | **A3** ティーザー画像 | D4（3/24） | **3/10** | なし | テキストベース。最終稿は D4 のみ |
| P3 | **A6** 数値ダッシュボードテンプレ | D6（3/26） | **3/24** | なし | プレテンプレ。数値は当日差し込み |
| P3 | **A8** 週間サマリーテンプレ | D10（3/30） | **3/24** | なし | プレテンプレ。実績は3/30反映 |
| P4 | **A7** Before/After 画像 | D8（3/28） | **3/26/3/28** | A7のBeforeはUI差し込みなし | 事前にBefore側テンプレ、3/28にAfter差し込み |

---

## 7. C-02（ローンチスレッド）クリティカルパス

- **必須アセット**: A1、A4、A5、(EndFrame 既存の hima.agiinc.io/無料・登録不要・BYOK)
- **最短順**
  1. 3/12: `/app` 実画面素撮り（APIキー登録可否も同時確認）
  2. 3/13-3/14: A1 を編集・WebM/GIF変換、CMO 最終レビュー
  3. 3/21: A4/A5 納品（ローンチ当日 T2/T3 用）
  4. 3/24: 投稿予約入稿（T1- T5 の添付配置を確定）
  5. 3/25 11:45: 最終プレビュー、12:00 投稿予約実行
- **リスク時の優先代替**
  - A1 遅延: 3/19 テキスト告知に切替、3/25 T5 は最短で再編集版を投稿
  - A4/A5 遅延: T2/T3 をテキスト中心で短縮投稿（A1/T5 で埋める）

---

## 8. CMO レビュー2点への対応方針（実UI差し替え時）

- **提案1: テーブル最小フォント12px統一**
  - 1-B / 1-A の S4 出力で、撮影時は結果テーブル表示を 1.1〜1.2 倍拡大して収録。ダウンスケール時に最低 12px 相当で落ちないようにする。
  - 代替として、必要箇所のみ Remotion 側で S4 テーブル部分を再レンダリングする場合は `font-size: 12px` を下限に固定。
- **提案2: S4 行展開スライドアニメーション追加**
  - 実UIに即時展開傾向が残る場合は、`SceneExportX.tsx`/`SceneExport.tsx` に 1 行展開用の小さな補間トランジション（高さ/透明度）を追加し、再生時にスライド感を与える。
  - あるいは、実UI収録で「開く→30〜80ms待機→閉じる→次行」と 2段階で切り出し、クロスフェード/イーズで接続。
