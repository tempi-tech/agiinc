# hima デモ GIF 1-A/1-B 実UI差し替え計画（W09）

## 0. 目的

- 1-A LP 用デモGIF (`demo-lp`) と 1-B X 用デモGIF (`demo-x`) で、現在のモックUIを実際の `hima.agiinc.io` 操作映像に差し替える。
- 画面撮影、差し替え箇所、品質ゲート、W09 内実行計画、A1-A8 納品順を同一ドキュメントで確定する。

---

## 1. スクリーンショット（画面キャプチャ）取得手順（実施対象）

### 1-1. 取得対象画面一覧（実画面）

`hima.agiinc.io` で以下を撮る。

- **LP**（`https://hima.agiinc.io`）
  - `Section 1 Hero`, CTA 付近の静止フレーム
  - `Demo` スペースに入る直前の状態（プレースホルダ未表示）

- **APIキー設定画面**（`https://hima.agiinc.io/app`）
  - ヘッダ右上「設定」ボタン → モーダル表示
  - 3 プロバイダ行（`OPENAI` / `ANTHROPIC` / `GOOGLE`）の入力/未入力UI

- **レシピエディタ画面**（`/app`）
  - 左パネル: レシピ名、モデル、プロンプト入力、検出変数
  - スクリプト上で `{{商品名}}` `{{カテゴリ}}` を入力し、変数検出が反映される瞬間

- **CSV 入力・マッピング画面**（`/app`）
  - 右上：CSV ドラッグ＆ドロップ
  - 読み込み完了後：`{{商品名}} -> 商品名`, `{{カテゴリ}} -> カテゴリ` の変数マッピング

- **バッチ実行画面**（`/app`）
  - 「バッチ実行」押下後、進捗バーと完了件数が増える状態（10件到達まで）

- **結果テーブル / CSVエクスポート画面**（`/app`）
  - 10件の結果が表示、ステータス/本文が見える状態
  - 1行、3行目の展開トリガー
  - 「CSV エクスポート」クリック後の完了表示

### 1-2. デモ 1-A/1-B シーン別の対応ショット

- 1-A（18s / 1200×750）: S1, S2, S3, S4
- 1-B（28s / 1200×675）: S0(全体)、S1, S2, S3, S4, End

補足: S0 は `/app` 全景ショット。S1-S4 は同一状態のワークスペース内で操作段階を切り出す。

### 1-3. ダミーデータ利用

- すべての CSV 関連ショットは `docs/hima/demo-data.csv` を使用。
- 件数は 10 件を基準とし、読み込み完了テキストが「10 件」と見える状態を採用。
- ショット開始前に `demo-data.csv` をドラッグ対象位置へ展開。

---

## 2. ブラウザ設定（撮影環境）

### 2-1. ウィンドウ設定

- **Chrome App mode** を原則採用: `--app=https://hima.agiinc.io`
- **ウィンドウ内サイズ**: `1440×900`（デモ収録ベース）
- `--app` 内はブラウザ UI（タブ/アドレス/拡張）非表示
- `--window-size=1440,900` を固定

### 2-2. 禁止事項 / 追加条件

- **DevTools / テストパネル表示**: 禁止
- 右上の `拡張機能`・ブックマークツールバーを非表示
- 通知非表示（集中）
- Dock/メニューバーの自動非表示推奨

### 2-3. キャプチャフロー

- 1回のシナリオで 1-2 シーン分ずつ録画し、後続編集でトリミング。
- 速度は 30fps WebM で録画し、後段で 15/12fps へダウンサンプリング。
- カーソルは常時表示。
- 画面表示上、過剰なハイライトやポップアップ（保存ダイアログ等）を避ける。

---

## 3. Remotion 置換マッピング（`products/hima/demo-video/`）

### 3-1. `DemoGif` エントリ

- `products/hima/demo-video/src/DemoGifLP.tsx`
  - `DemoGifLP` の `SceneRecipe`, `SceneCsvImport`, `SceneBatchExec`, `SceneExport` の構成を維持。
  - 置換対象: 4 シーン内部の `HimaWorkspace` 生成ロジックを実UI映像参照へ切替。

- `products/hima/demo-video/src/DemoGifX.tsx`
  - `SceneOverviewX` 追加を含む 5シーン構成を維持。
  - 置換対象: `SceneOverviewX`, `SceneRecipeX`, `SceneCsvImportX`, `SceneBatchExecX`, `SceneExportX`。

### 3-2. シーン別差し替え（実装観点）

- `products/hima/demo-video/src/scenes/SceneRecipe.tsx`
  - **差替え:** モック文字入力処理を実UIの S1 ショットへ。
  - 置換対象: `promptText`, `variablesDetected`, `cursorPosition`, `showCursorHighlight` を描画する `HimaWorkspace` ブロック全体。

- `products/hima/demo-video/src/scenes/SceneRecipeX.tsx`
  - **差替え:** レシピ名＋プロンプト＋モデル選択までの 6 秒域を実UIに置換。
  - 置替え対象: `cursor*` 演出と `HimaWorkspace` の可変レンダリング。

- `products/hima/demo-video/src/scenes/SceneCsvImport.tsx`
- `products/hima/demo-video/src/scenes/SceneCsvImportX.tsx`
  - **差替え:** ドラッグ＆ドロップ、マッピング成立、件数表示の 1-S2 シーンを実UIで再現。
  - 置換対象: `csvLoaded` / `mappings` / `cursor*` / `csvPreviewData` のモック描画部。

- `products/hima/demo-video/src/scenes/SceneBatchExec.tsx`
- `products/hima/demo-video/src/scenes/SceneBatchExecX.tsx`
  - **差替え:** 進捗更新・完了件数を実UIで収録した S3 へ。
  - 置換対象: `batchProgress` 系の合成ロジック。

- `products/hima/demo-video/src/scenes/SceneExport.tsx`
- `products/hima/demo-video/src/scenes/SceneExportX.tsx`
  - **差替え:** 結果テーブル／展開表示／CSVエクスポートの挙動を実UIショットへ。
  - 置換対象: `expandedRow`, `showExportDone`, `results`, `csv mapping` まわりの HimaWorkspace 生成。

- `products/hima/demo-video/src/scenes/SceneEndFrame.tsx`
  - End フレームは現行仕様を維持。色・文言が問題ないため実UI差し替え不要。

### 3-3. 追加実装（差し替え品質担保）

- `products/hima/demo-video/src/` 配下へ `assets/real-ui/` を追加。
- 各シーンは `props` でショット名を受ける方式にして差し替えを一元管理。
- `SceneOverviewX` は 2 秒静止ショットをベースにクロスフェード接続。

---

## 4. 画像品質基準

### 4-1. 1-A LP

- 解像度: `1200 × 750`（16:10）
- FPS: `15`
- ファイル上限: GIF `5MB`, WebM `2MB`
- 色味補正: 基本 **なし**（実UI見た目そのまま）
- 追加条件: 文字潰れ/行送り崩れなし、端数のコントラスト維持

### 4-2. 1-B X

- 解像度: `1200 × 675`（16:9）
- FPS: `12`
- ファイル上限: `15MB`
- 色味補正: 基本 **なし**（必要なら明るさ/コントラストを +/−5% 以内）
- 追加条件: CTA は 2 秒以上読める停滞を確保

### 4-3. 実UI収録素材チェック

- フレームレート・サイズは `ffprobe` で再確認。
- 文字可読性（特に 11px～12px 以降）を X/LP再生想定で確認。
- ループ時の繋ぎが自然（`1-A`: 18s, `1-B`: 28s）。

---

## 5. W09（2/24-3/2）実施計画

### 5-1. W09 前半（2/24-2/28）

| 日付 | 作業 | 成果 |
|---|---|---|
| 2/24 | CMO レビュー項目（A1最小フォント=12, S4行展開の質）を差し替え仕様へ反映 | 承認待ちなく制作進行可の仕様版を確定 |
| 2/25 | シーン→ショット（S0〜S4）マッピング確定、素材命名規則のドラフト作成 | `shots/` 命名表と導線図 |
| 2/26 | `demo-capture-guide` と照合し、W09 内での撮影準備を完了（ブラウザ起動手順・マクロ） | 撮影手順の当日障害を減らす |
| 2/27 | CMO 連携で A1（デモGIF）利用方針を確定（見切れ回避・文字サイズ） | 3/12収録時の評価基準を固定 |
| 2/28 | `DemoGif` 側で置換対象コンポーネントの変更点をレビュー（本番編集担当向け） | W10 以降の実装準備完了 |

### 5-2. W09 後半（2/29-3/2）

| 日付 | 作業 | 成果 |
|---|---|---|
| 2/29 | APIキー画面を含む状態確認チェックリストを作成（撮影時のUI可否） | `settings` キャプチャの再現性確保 |
| 3/1 | `demo-data.csv` 10件で CSV 読み込みフローをプレキャプチャ（内部再現用） | 1-B S2/S4 の再現性確認 |
| 3/2 | 収録完了条件を最終承認（画角・ズーム・フォント・色） | 3/12収録時の実施基準凍結 |

---

## 6. A1-A8 制作優先順位と納品スケジュール（ローンチC-02起点）

| 優先度 | 資産 | 主要用途 | 納品日（目標） | 依存 | 備考 |
|---|---|---|---|---|---|
| P0 | **A1** デモGIF 1-B（既存） | D2（3/19）/D5-T5（3/25） | **3/14** | APIキー設定後のUI実収録可否 | `demo-video` の核心価値。最優先 |
| P1 | **A4** 3ステップ図解画像 | D5-T2（3/25） | **3/21** | なし | テキストベース可。UI依存なし |
| P1 | **A5** BYOK訴求画像 | D5-T3（3/25） | **3/21** | なし | テキストベース可。UI依存なし |
| P2 | **A2** カウントダウン画像 | D3（3/21） | **3/10** | なし | テキストベース。最終稿は D3 のみ |
| P2 | **A3** ティーザー画像 | D4（3/24） | **3/10** | なし | テキストベース。最終稿は D4 のみ |
| P3 | **A6** 数値ダッシュボードテンプレ | D6（3/26） | **3/24** | なし | プレテンプレ。数値は当日差し込み |
| P3 | **A8** 週間サマリーテンプレ | D10（3/30） | **3/24** | なし | プレテンプレ。実績は3/30反映 |
| P4 | **A7** Before/After 画像 | D8（3/28） | **3/26/3/28** | A7のBeforeはUI差し込みなし | 事前にBefore側テンプレ、3/28にAfter差し込み |

---

## 7. C-02（ローンチスレッド）クリティカルパス

- **必須アセット**: A1、A4、A5、(EndFrame 既存の hima.agiinc.io/無料・登録不要・BYOK)
- **最短順**
  1. 3/12: `/app` 実画面素撮り（APIキー登録可否も同時確認）
  2. 3/13-3/14: A1 を編集・WebM/GIF変換、CMO 最終レビュー
  3. 3/21: A4/A5 納品（ローンチ当日 T2/T3 用）
  4. 3/24: 投稿予約入稿（T1- T5 の添付配置を確定）
  5. 3/25 11:45: 最終プレビュー、12:00 投稿予約実行
- **リスク時の優先代替**
  - A1 遅延: 3/19 テキスト告知に切替、3/25 T5 は最短で再編集版を投稿
  - A4/A5 遅延: T2/T3 をテキスト中心で短縮投稿（A1/T5 で埋める）

---

## 8. CMO レビュー2点への対応方針（実UI差し替え時）

- **提案1: テーブル最小フォント12px統一**
  - 1-B / 1-A の S4 出力で、撮影時は結果テーブル表示を 1.1〜1.2 倍拡大して収録。ダウンスケール時に最低 12px 相当で落ちないようにする。
  - 代替として、必要箇所のみ Remotion 側で S4 テーブル部分を再レンダリングする場合は `font-size: 12px` を下限に固定。

- **提案2: S4 行展開スライドアニメーション追加**
  - 実UIに即時展開傾向が残る場合は、`SceneExportX.tsx`/`SceneExport.tsx` に 1 行展開用の小さな補間トランジション（高さ/透明度）を追加し、再生時にスライド感を与える。
  - あるいは、実UI収録で「開く→30〜80ms待機→閉じる→次行」と 2段階で切り出し、クロスフェード/イーズで接続。

